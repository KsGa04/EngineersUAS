<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/cv_generator.css">
    <script src="/static/token.js"></script>
</head>
<body>
    <div class="wrapper">
    <header>
        <div class="header__container _container">
            <div class="header__left">
                <div class="header__logo">
                    <div class="logo__example"></div>
                </div>
                <div class="header__logo__title">
                    <h1>Карьерный<br>Инженерный<br>Портал</h1>
                </div>
            </div>
            <div class="header__right">
                <img src="static/assets/images/person_icon.svg" alt="" id="personIcon" >
                    <div class="person-menu" id="personMenu">
                        <ul>
                            <li><a href="/userboard">Личный кабинет</a></li>
                            <li><a href="/cvgenerator">Генерация резюме</a></li>
                            <li><a href="login">Выход</a></li>
                        </ul>
                    </div>
            </div>
        </div>
    </header>

    <main>
        <div class="cv__generation__container _container">
            <div class="cv__generation__left">
                <div class="cv__generation__title">
                    <h1 class="title1">РЕЗЮМЕ</h1>
                </div>
                    <div class="cv__generation__item">
                            <form action="" class="account__cv__form">
                                
                                <div class="groupnumber__item cv__form__item">
    
                                    <div class="cv__form__title">
                                        <h4 class="">
                                            Опыт работы
                                        </h4>
                                    </div>
                                    <textarea name="cv__groupnumber" id="" class="cv__form__input"></textarea>
                                </div>
                                <div class="bio__item cv__form__item">
                                    <div class="cv__form__title">
                                        <h4>Образование</h4>
                                    </div>
                                    <textarea type="text" name="cv__bio" class="cv__form__input"></textarea>
                                </div>
                                <div class="projects__item cv__form__item">
                                    <div class="cv__form__title">
                                        <h4>Проекты</h4>
                                    </div>
                                    <a href="" class="cv__form__input"></a>
                                </div>
                                <div class="skills__item cv__form__item">
                                    <div class="cv__form__title">
                                        <h4>Навыки</h4>
                                    </div>
                                    <select name="select_skills" id="skills" class="cv__form__input" placeholder="Выбрать из списка"> 
                                        <option value="value1" >Python</option>
                                        <option value="value2" >C++</option>
                                        <option value="value3">Autocad</option>
                                    </select>
                                </div>
                                <div class="links__item cv__form__item">
                                    <div class="cv__form__title">
                                        <h4>Ссылки на <br>портфолио/GitHub</h4>
                                    </div>
                                    <textarea type="text" name="cv__links" id="cv__links" class="cv__form__input"></textarea>
                                </div>
                            </form>

                    </div>
                </div>

            <div class="cv__generation__right">
                <div class="cv__generation__preview__title">
                    <h2 class="">ВНЕШНИЙ ВИД</h2>
                </div>
                <div class="cv__generation__preview__items">
                    <div class="cv__generation__preview__item active">
                        <h3 class="cv__generation__preview__item__title">ШАБЛОН 1</h3>
                        <div class="cv__generation__preview__item__elem cv__preview">
                            <img src="static/assets/images/cv_preview1.jpg" alt="">
                        </div>
                        <a href="" class="cv__generation__preview__item__open">ПРЕДПРОСМОТР</a>
                    </div>
                    <div class="cv__generation__preview__item">
                        <div class="cv__generation__preview__item__title"><h3>ШАБЛОН 2</h3></div>
                        <div class="cv__generation__preview__item__elem cv__preview">
                            <img src="static/assets/images/cv_preview2.jpg" alt="">
                        </div>
                        <a href="" class="cv__generation__preview__item__open">ПРЕДПРОСМОТР</a>
                    </div>
                    <div class="cv__generation__preview__item">
                        <div class="cv__generation__preview__item__title"><h3>ШАБЛОН 3</h3></div>
                        <div class="cv__generation__preview__item__elem cv__preview">
                            <img src="static/assets/images/cv_preview3.jpg" alt="">
                        </div>
                        <a href="" class="cv__generation__preview__item__open">ПРЕДПРОСМОТР</a>
                    </div>
                    
                </div>
                <a href="" class="cv__generation__create">СОЗДАТЬ</a>
            </div>
        </div>
    </main>
    <div class="contacts__wrapper">
        <a href="https://t.me/KIP_support"><img src="static/assets/images/telegram.png" alt=""></a>
    </div>
        <!-- Модальное окно -->
        <div id="modal-overlay" class="modal-overlay">
            <div id="modal" class="modal">
                <span id="modal-close" class="modal-close">&times;</span>
                <h2 id="modal-title">Заполните данные</h2>
                <div id="modal-content">
                    <!-- Dynamic content will be injected here -->
                </div>
            </div>
        </div>

</div>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
    <script src="/static/icon.js"></script>
<script src="/static/education.js"></script>
<script src="/static/work.js"></script>
<script src="/static/projects.js"></script>
    <script src="/static/pattern.js"></script>
<script>
    document.getElementById("cv__links").addEventListener("blur", function() {
        if (this.value.includes("github.com")) {
            const confirmLoad = confirm("Подгрузить репозитории из GitHub?");
            if (confirmLoad) {
                const id_user = localStorage.getItem("id_resume");
                fetchWithAuth(`/api/github/add_repos?github_url=${encodeURIComponent(this.value)}&id_resume=${id_user}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Ошибка HTTP: ${response.status} - ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    alert("Репозитории успешно загружены в проекты.");
                    console.log("Загруженные проекты:", data);
                    loadExistingProjects(); // Обновить список проектов
                })
                .catch(error => console.error("Ошибка загрузки репозиториев:", error));
            }
        }
    });
</script>
</body>
</html>